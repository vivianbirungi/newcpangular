
<section class="body">
        
    <div class="row main">
        <div class="col-3 left-side">  
          <div class="profile"> 
            <div class="profilepic"></div>
            <div class="details text-center">
                <span><b>Amanyire Betty</b></span><br/>
                <span class="faint">Admin</span><br/>
                <span class="faint">amanyire@cp.com</span><br/>
                <button type="button" class="btn btn-info btn-cp">Edit</button>
            </div>
          </div>
          <div class="fieldOfficers">
              <h5 class="text-center text-divider"><span>Field Officers</span></h5>
              <accordion [closeOthers]="oneAtATime" >
                    <accordion-group *ngFor='let officer of availableOfficers; let i = index' (click)="getFacilityCount(officer.fieldOfficerID)" heading= '{{officer?.firstName}} &nbsp;  {{officer?.lastName}}'>
                            <div class="media">
                                    <img src="../../../assets/pp.jpg" class="mr-3" alt="..." width="50px" height="50px">
                                    <div class="media-body">
                                        <h6 class="mt-0"> ID : {{officer.fieldOfficerID}}</h6>
                                        <span class="faint"> <b>Division</b> : {{officer?.Division}}</span><br/>
                                        <span class="faint">{{officerFacilities?.length}} Facilities</span><br/>
                                        <button class="btn-clear"  data-placement="top" title="add facility" data-toggle="collapse" data-target="#demo"><i class="fa fa-plus-circle" style="font-size: 20px"></i></button>
                                    </div>
                                </div>
                                <div id="demo" class="collapse">
                                    <form>       
                                        <div class="attachField">
                                       
                                            <select class="custom-select" id="validationCustom04" required name="facilityAttached" [(ngModel)]="facilityAttached">
                                                <option selected disabled value="">Choose....</option>
                                                <option *ngFor="let fac of facilitiesLacking" value="{{fac.nin}}" >{{fac?.nin}} &nbsp;{{fac?.facilityName}}</option>
                                            </select>
                                            <div class="invalid-feedback">  </div>
                                        </div>   
                                        <button class="btn-cp" (click)="attachFieldOfficer(officer.fieldOfficerID); facilityAttached=[]">Attach</button>
                                    </form>
                                </div>
                    </accordion-group>
                   
                  </accordion>
             
          </div>
        </div>
        <div class="col-9 right-side">
                <div class="navcard card">
                        <nav class="navbar navbar-light bg-light">
                                <a class="navbar-brand"></a>
                                
                                  <button class="btn btn-outline my-2 my-sm-0" type="submit" (click)="goback()">Logout</button>
                              
                </nav>
               </div>
             <div class="mainbody">
                    

                 <div class="row tablerow">
                     <div class="col-3">
                            <div class="card text-center">
                                    <div class="card-body">
                                      <h5 class="card-title">Facility Request</h5>
                                      <span class="card-number">{{facilityRequest?.length}}</span><br/>
                                      <a class="card-link" (click)="view('request')">View Details</a>
                                    </div>
                            </div>
                     </div>
                     <div class="col-3">
                            <div class="card text-center">
                                <div class="card-body text-center">
                                    <h5 class="card-title">Await Review</h5>
                                    <span class="card-number">{{awaitReview?.length}}</span><br/>
                                    <a  class="card-link" (click)="view('awaitReviews')">View Details</a>
                                </div>
                            </div>
                     </div>
                     <div class="col-3">
                            <div class="card text-center">
                                <div class="card-body text-center">
                                    <h5 class="card-title">Under Review</h5>
                                    <span class="card-number">{{underReview?.length}}</span><br/>
                                    <a class="card-link" (click)="view('underReviews')">View Details</a>
                                </div>
                            </div>
                     </div>
                     <div class="col-3">
                            <div class="card text-center">
                                <div class="card-body text-center">
                                    <h5 class="card-title">Approved</h5>
                                    <span class="card-number">{{approved?.length}}</span><br/>
                                    <a  class="card-link" (click)="view('approvals')">View Details</a>
                                </div>
                            </div>
                     </div>
                 </div>
                 <div class="table" *ngIf="request">
                 <h3>Facility Requests</h3>
                 <mat-table class="datatable" [dataSource]="dataSource" matSort>
                    <ng-container matColumnDef="facilityName">
                        <mat-header-cell *matHeaderCellDef mat-sort-header>Facility</mat-header-cell>
                        <mat-cell *matCellDef="let row"> {{row?.facilityName}} </mat-cell>
                    </ng-container>
          
                    <ng-container matColumnDef="facilityType">
                        <mat-header-cell *matHeaderCellDef mat-sort-header>Type</mat-header-cell>
                        <mat-cell *matCellDef="let row"> {{row?.facilityType}} </mat-cell>
                    </ng-container>
          
                    <ng-container matColumnDef="Code">
                        <mat-header-cell *matHeaderCellDef mat-sort-header>Code #</mat-header-cell>
                        <mat-cell *matCellDef="let row" class="mycolor2"> {{row?.nin }} </mat-cell>
                    </ng-container>
          
                    <ng-container matColumnDef="Location">
                        <mat-header-cell *matHeaderCellDef mat-sort-header>Location</mat-header-cell>
                        <mat-cell *matCellDef="let row">{{row?.location2.town }} - {{row?.location2.division }} </mat-cell>
                    </ng-container>
                    <ng-container matColumnDef="contact">
                        <mat-header-cell *matHeaderCellDef mat-sort-header>Contact </mat-header-cell>
                        <mat-cell *matCellDef="let row"> {{row?.phone }} {{row?.email}} </mat-cell>
                    </ng-container>
                    <ng-container matColumnDef="State">
                      <mat-header-cell *matHeaderCellDef mat-sort-header>Action</mat-header-cell>
                      <mat-cell *matCellDef="let row" style="text-align: center; color:aliceblue;" (click)="openModal(template, row, 'request')"  > 
                       <button class="btn-cp-outline">Received</button>
                    </mat-cell>
                  </ng-container>
          
                    <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
                    <mat-row class="rows" *matRowDef="let row; columns: displayedColumns;" ></mat-row>
                </mat-table>
                <mat-paginator #paginators
                        [length]="facilityRequest.length"
                        [pageIndex]="0"
                        [pageSize]="5"
                        [pageSizeOptions]="[ 5, 15, 25, 50, 75, 100]">
                </mat-paginator>
                   
                 </div>
                 <div class="table" *ngIf="awaitReviews">
                    <h3>Await Review</h3>
   
                    <mat-table class="datatable" [dataSource]="dataSource" matSort>
                        <ng-container matColumnDef="facilityName">
                            <mat-header-cell *matHeaderCellDef mat-sort-header>Facility</mat-header-cell>
                            <mat-cell *matCellDef="let row"> {{row?.facilityName}} </mat-cell>
                        </ng-container>
              
                        <ng-container matColumnDef="facilityType">
                            <mat-header-cell *matHeaderCellDef mat-sort-header>Type</mat-header-cell>
                            <mat-cell *matCellDef="let row"> {{row?.facilityType}} </mat-cell>
                        </ng-container>
              
                        <ng-container matColumnDef="Code">
                            <mat-header-cell *matHeaderCellDef mat-sort-header>Code #</mat-header-cell>
                            <mat-cell *matCellDef="let row" class="mycolor2"> {{row?.nin }} </mat-cell>
                        </ng-container>
                        <ng-container matColumnDef="Location">
                            <mat-header-cell *matHeaderCellDef mat-sort-header>Location</mat-header-cell>
                            <mat-cell *matCellDef="let row"> {{row?.location2.town }} - {{row?.location2.division }} </mat-cell>
                        </ng-container>
                        <ng-container matColumnDef="contact">
                            <mat-header-cell *matHeaderCellDef mat-sort-header>Contact</mat-header-cell>
                            <mat-cell *matCellDef="let row"> {{row?.phone }} {{row?.email }} </mat-cell>
                        </ng-container>
              
                        <ng-container matColumnDef="State">
                          <mat-header-cell *matHeaderCellDef mat-sort-header>Action</mat-header-cell>
                          <mat-cell *matCellDef="let row" style="text-align: center; color:aliceblue"  > <button class="btn-cp-outline">Review</button></mat-cell>
                      </ng-container>
              
                        <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
                        <mat-row class="rows" *matRowDef="let row; columns: displayedColumns;" (click)="review(row)"></mat-row>
                    </mat-table>
                    <mat-paginator 
                            [length]="awaitReview.length"
                            [pageIndex]="0"
                            [pageSize]="5"
                            [pageSizeOptions]="[ 5, 15, 25, 50, 75, 100]">
                    </mat-paginator>
                       
                    </div>
                    <div class="table" *ngIf="underReviews">
                        <h3>Under Review</h3>
                           <mat-table class="datatable" [dataSource]="dataSource" matSort>
                            <ng-container matColumnDef="facilityName">
                                <mat-header-cell *matHeaderCellDef mat-sort-header>Facility</mat-header-cell>
                                <mat-cell *matCellDef="let row"> {{row?.facilityName}} </mat-cell>
                            </ng-container>
                  
                            <ng-container matColumnDef="facilityType">
                                <mat-header-cell *matHeaderCellDef mat-sort-header>Type</mat-header-cell>
                                <mat-cell *matCellDef="let row"> {{row?.facilityType}} </mat-cell>
                            </ng-container>
                  
                            <ng-container matColumnDef="Code">
                                <mat-header-cell *matHeaderCellDef mat-sort-header>Code #</mat-header-cell>
                                <mat-cell *matCellDef="let row" class="mycolor2"> {{row?.nin }} </mat-cell>
                            </ng-container>
                            <ng-container matColumnDef="Location">
                                <mat-header-cell *matHeaderCellDef mat-sort-header>Location</mat-header-cell>
                                <mat-cell *matCellDef="let row"> {{row?.location2.town }} - {{row?.location2.division }} </mat-cell>
                            </ng-container>
                            <ng-container matColumnDef="contact">
                                <mat-header-cell *matHeaderCellDef mat-sort-header>Contact</mat-header-cell>
                                <mat-cell *matCellDef="let row"> {{row?.phone }} {{row?.email }} </mat-cell>
                            </ng-container>
                  
                            <ng-container matColumnDef="State">
                              <mat-header-cell *matHeaderCellDef mat-sort-header>State</mat-header-cell>
                              <mat-cell *matCellDef="let row" style="text-align: center; color:aliceblue; padding-left: 50px"  > <button class="btn-cp-outline">{{row?.businessState }}</button></mat-cell>
                          </ng-container>
                  
                            <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
                            <mat-row class="rows" *matRowDef="let row; columns: displayedColumns;" (click)="reviewDocs(row)"></mat-row>
                        </mat-table> 
                         <mat-paginator #paginators
                                [length]="underReview.length"
                                [pageIndex]="0"
                                [pageSize]="5"
                                [pageSizeOptions]="[ 5, 15, 25, 50, 75, 100]">
                        </mat-paginator>
                           
                        </div>
                        <div class="table" *ngIf="approvals">
                            <h3>Approved</h3>
           
                            <mat-table class="datatable" [dataSource]="dataSource" matSort>
                                <ng-container matColumnDef="facilityName">
                                    <mat-header-cell *matHeaderCellDef mat-sort-header>Facility</mat-header-cell>
                                    <mat-cell *matCellDef="let row"> {{row?.facilityName}} </mat-cell>
                                </ng-container>
                      
                                <ng-container matColumnDef="facilityType">
                                    <mat-header-cell *matHeaderCellDef mat-sort-header>Type</mat-header-cell>
                                    <mat-cell *matCellDef="let row"> {{row?.facilityType}} </mat-cell>
                                </ng-container>
                      
                                <ng-container matColumnDef="Code">
                                    <mat-header-cell *matHeaderCellDef mat-sort-header>Code #</mat-header-cell>
                                    <mat-cell *matCellDef="let row" class="mycolor2"> {{row?.nin }} </mat-cell>
                                </ng-container>
                                <ng-container matColumnDef="Location">
                                    <mat-header-cell *matHeaderCellDef mat-sort-header>Location</mat-header-cell>
                                    <mat-cell *matCellDef="let row"> {{row?.location2.town }} - {{row?.location2.division }} </mat-cell>
                                </ng-container>
                                <ng-container matColumnDef="contact">
                                    <mat-header-cell *matHeaderCellDef mat-sort-header>Contact</mat-header-cell>
                                    <mat-cell *matCellDef="let row"> {{row?.phone}} {{row?.email}} </mat-cell>
                                </ng-container>
                      
                                <ng-container matColumnDef="State">
                                  <mat-header-cell *matHeaderCellDef mat-sort-header>State</mat-header-cell>
                                  <mat-cell *matCellDef="let row" style="text-align: center; color:aliceblue; padding-left: 50px"  > <button class="btn-cp-outline">Create Account</button></mat-cell>
                              </ng-container>
                      
                                <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
                                <mat-row class="rows" *matRowDef="let row; columns: displayedColumns;" (click)="onRowClicked(row)"></mat-row>
                            </mat-table>
                            <mat-paginator #paginators
                                    [length]="approved.length"
                                    [pageIndex]="0"
                                    [pageSize]="5"
                                    [pageSizeOptions]="[ 5, 10,15,20, 25, 50, 75, 100]">
                            </mat-paginator>
                               
                            </div>
                            <div class="table" *ngIf="rejects">
                                <h3>Rejected</h3>
               
                                <mat-table class="datatable" [dataSource]="dataSource" matSort>
                                    <ng-container matColumnDef="facilityName">
                                        <mat-header-cell *matHeaderCellDef mat-sort-header>Facility</mat-header-cell>
                                        <mat-cell *matCellDef="let row"> {{row?.facilityName}} </mat-cell>
                                    </ng-container>
                          
                                    <ng-container matColumnDef="facilityType">
                                        <mat-header-cell *matHeaderCellDef mat-sort-header>Type</mat-header-cell>
                                        <mat-cell *matCellDef="let row"> {{row?.facilityType}} </mat-cell>
                                    </ng-container>
                          
                                    <ng-container matColumnDef="Code">
                                        <mat-header-cell *matHeaderCellDef mat-sort-header>Code #</mat-header-cell>
                                        <mat-cell *matCellDef="let row" class="mycolor2"> {{row.nin }} </mat-cell>
                                    </ng-container>
                          
                                    <ng-container matColumnDef="Owner Name">
                                        <mat-header-cell *matHeaderCellDef mat-sort-header>Owner's Name</mat-header-cell>
                                        <mat-cell *matCellDef="let row"> {{row?.firstName }} {{row?.lastName }} </mat-cell>
                                    </ng-container>
                          
                                    <ng-container matColumnDef="State">
                                      <mat-header-cell *matHeaderCellDef mat-sort-header>State</mat-header-cell>
                                      <mat-cell *matCellDef="let row" style="text-align: center; padding-left: 50px"  > {{row?.businessState }}</mat-cell>
                                  </ng-container>
                          
                                    <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
                                    <mat-row class="rows" *matRowDef="let row; columns: displayedColumns;" (click)="onRowClicked(row)"></mat-row>
                                </mat-table>
                                <mat-paginator #paginators
                                        [length]="Rejected.length"
                                        [pageIndex]="0"
                                        [pageSize]="5"
                                        [pageSizeOptions]="[ 5, 15, 25, 50, 75, 100]">
                                </mat-paginator>
                                   
                                </div>
             </div>
        </div>
       
<ng-template #template >
    <div class="modal-header">
    <h4 class="modal-title pull-left">Lets know how you are progressing</h4>
    <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
    <span aria-hidden="true">&times;</span>
    </button>
    </div>
    <div class="modal-body">
    <div>
    <p>Are you sure you are moving the state?</p>

    <div class="btn-inline" aria-label="Basic example">
    <button style="background: #00bcd4; border-radius: 0 150px 0 150px; padding: 0 10px 0 10px" (click)="changeState(template)">Continue</button>
    <button  type="button" (click)="modalRef.hide()" style="border: 1px solid #00bcd4; background: white; border-radius: 0 150px 0 150px; padding: 0 10px 0 10px">Cancel</button>
    </div>
    </div>
    </div>
   </ng-template>
    </div>
</section>
